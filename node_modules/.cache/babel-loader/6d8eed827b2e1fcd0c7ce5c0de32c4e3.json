{"ast":null,"code":"import _slicedToArray from\"/home/mb4718/Desktop/sgamble/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{computeProximityPercent,formatDistance,generateSquareCharacters,getDirectionEmoji}from\"../domain/geography\";import React,{useCallback,useEffect,useState}from\"react\";import CountUp from\"react-countup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SQUARE_ANIMATION_LENGTH=250;export function GuessRow(_ref){var guess=_ref.guess,settingsData=_ref.settingsData,countryInputRef=_ref.countryInputRef;var distanceUnit=settingsData.distanceUnit,theme=settingsData.theme;var proximity=guess!=null?computeProximityPercent(guess.distance):0;var squares=generateSquareCharacters(proximity,theme);var _useState=useState(\"NOT_STARTED\"),_useState2=_slicedToArray(_useState,2),animationState=_useState2[0],setAnimationState=_useState2[1];useEffect(function(){if(guess==null){return;}setAnimationState(\"RUNNING\");var timeout=setTimeout(function(){setAnimationState(\"ENDED\");},SQUARE_ANIMATION_LENGTH*6);return function(){clearTimeout(timeout);};},[guess]);var handleClickOnEmptyRow=useCallback(function(){if((countryInputRef===null||countryInputRef===void 0?void 0:countryInputRef.current)!=null){countryInputRef===null||countryInputRef===void 0?void 0:countryInputRef.current.focus();}},[countryInputRef]);switch(animationState){case\"NOT_STARTED\":return/*#__PURE__*/_jsx(\"div\",{onClick:handleClickOnEmptyRow,className:\"col-span-7 h-8 bg-gray-200 dark:bg-slate-600\"});case\"RUNNING\":return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex text-2xl w-full justify-evenly items-center col-span-6 border-2 h-8\",children:squares.map(function(character,index){return/*#__PURE__*/_jsx(\"div\",{className:\"opacity-0 animate-reveal\",style:{animationDelay:\"\".concat(SQUARE_ANIMATION_LENGTH*index,\"ms\")},children:character},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"border-2 h-8 col-span-1 animate-reveal\",children:/*#__PURE__*/_jsx(CountUp,{end:proximity,suffix:\"%\",duration:SQUARE_ANIMATION_LENGTH*5/1000})})]});case\"ENDED\":return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center border-2 h-8 col-span-3 animate-reveal\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-ellipsis overflow-hidden whitespace-nowrap\",children:guess===null||guess===void 0?void 0:guess.name.toUpperCase()})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center border-2 h-8 col-span-2 animate-reveal\",children:guess&&formatDistance(guess.distance,distanceUnit)}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center border-2 h-8 col-span-1 animate-reveal\",children:guess&&getDirectionEmoji(guess)}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center border-2 h-8 col-span-1 animate-reveal animate-pop\",children:\"\".concat(proximity,\"%\")})]});}}","map":{"version":3,"sources":["/home/mb4718/Desktop/sgamble/src/components/GuessRow.tsx"],"names":["computeProximityPercent","formatDistance","generateSquareCharacters","getDirectionEmoji","React","useCallback","useEffect","useState","CountUp","SQUARE_ANIMATION_LENGTH","GuessRow","guess","settingsData","countryInputRef","distanceUnit","theme","proximity","distance","squares","animationState","setAnimationState","timeout","setTimeout","clearTimeout","handleClickOnEmptyRow","current","focus","map","character","index","animationDelay","name","toUpperCase"],"mappings":"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","sourcesContent":["import {\n  computeProximityPercent,\n  formatDistance,\n  generateSquareCharacters,\n  getDirectionEmoji,\n} from \"../domain/geography\";\nimport { Guess } from \"../domain/guess\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport CountUp from \"react-countup\";\nimport { SettingsData } from \"../hooks/useSettings\";\n\nconst SQUARE_ANIMATION_LENGTH = 250;\ntype AnimationState = \"NOT_STARTED\" | \"RUNNING\" | \"ENDED\";\n\ninterface GuessRowProps {\n  guess?: Guess;\n  settingsData: SettingsData;\n  countryInputRef?: React.RefObject<HTMLInputElement>;\n}\n\nexport function GuessRow({\n  guess,\n  settingsData,\n  countryInputRef,\n}: GuessRowProps) {\n  const { distanceUnit, theme } = settingsData;\n  const proximity = guess != null ? computeProximityPercent(guess.distance) : 0;\n  const squares = generateSquareCharacters(proximity, theme);\n\n  const [animationState, setAnimationState] =\n    useState<AnimationState>(\"NOT_STARTED\");\n\n  useEffect(() => {\n    if (guess == null) {\n      return;\n    }\n\n    setAnimationState(\"RUNNING\");\n    const timeout = setTimeout(() => {\n      setAnimationState(\"ENDED\");\n    }, SQUARE_ANIMATION_LENGTH * 6);\n\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [guess]);\n\n  const handleClickOnEmptyRow = useCallback(() => {\n    if (countryInputRef?.current != null) {\n      countryInputRef?.current.focus();\n    }\n  }, [countryInputRef]);\n\n  switch (animationState) {\n    case \"NOT_STARTED\":\n      return (\n        <div\n          onClick={handleClickOnEmptyRow}\n          className={`col-span-7 h-8 bg-gray-200 dark:bg-slate-600`}\n        />\n      );\n    case \"RUNNING\":\n      return (\n        <>\n          <div\n            className={`flex text-2xl w-full justify-evenly items-center col-span-6 border-2 h-8`}\n          >\n            {squares.map((character, index) => (\n              <div\n                key={index}\n                className=\"opacity-0 animate-reveal\"\n                style={{\n                  animationDelay: `${SQUARE_ANIMATION_LENGTH * index}ms`,\n                }}\n              >\n                {character}\n              </div>\n            ))}\n          </div>\n          <div className=\"border-2 h-8 col-span-1 animate-reveal\">\n            <CountUp\n              end={proximity}\n              suffix=\"%\"\n              duration={(SQUARE_ANIMATION_LENGTH * 5) / 1000}\n            />\n          </div>\n        </>\n      );\n    case \"ENDED\":\n      return (\n        <>\n          <div className=\"flex items-center justify-center border-2 h-8 col-span-3 animate-reveal\">\n            <p className=\"text-ellipsis overflow-hidden whitespace-nowrap\">\n              {guess?.name.toUpperCase()}\n            </p>\n          </div>\n          <div className=\"flex items-center justify-center border-2 h-8 col-span-2 animate-reveal\">\n            {guess && formatDistance(guess.distance, distanceUnit)}\n          </div>\n          <div className=\"flex items-center justify-center border-2 h-8 col-span-1 animate-reveal\">\n            {guess && getDirectionEmoji(guess)}\n          </div>\n          <div className=\"flex items-center justify-center border-2 h-8 col-span-1 animate-reveal animate-pop\">\n            {`${proximity}%`}\n          </div>\n        </>\n      );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}